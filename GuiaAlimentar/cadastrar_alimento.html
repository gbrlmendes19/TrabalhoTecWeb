
<!DOCTYPE <!DOCTYPE html>
<html lang="pt-BR">

<head>

    <meta charset="utf-8" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Guia Alimentar</title>

    <link href="css/style.css" rel="stylesheet" />
    <link href="css/responsive/responsive.css" rel="stylesheet">
    <link rel="icon" href="img/icone3.jpg" />

</head>

<body>

    <!-- Preloader Start -->
    <div id="preloader">
        <div class="yummy-load"></div>
    </div>

    <!-- ****** Top Header ****** -->
    <div class="top_header_area">
        <div class="container">
            <div class="row">
                <div class="col-5 col-sm-6">
                    <!--  Top Social bar start -->
                </div>

                <!--  Login Register Area -->
                <div class="col-7 col-sm-6">
                    <div class="signup-search-area d-flex align-items-center justify-content-end">
                        <div class="login_register_area d-flex">
                            <div class="login">
                                <a href="login.html">Entrar</a>
                            </div>
                            <div class="register">
                                <a href="cadastrar.html">Cadastrar</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- ****** Top Header ****** -->

    <!-- ****** Header ****** -->
    <header class="header_area">
        <div class="container">
            <div class="row">
                <!-- Logo Area Start -->
                <div class="col-12">
                    <div class="logo_area text-center">
                        <a href="" class="yummy-logo">Guia Alimentar</a>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-12">
                    <nav class="navbar navbar-expand-lg">
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#yummyfood-nav"
                            aria-controls="yummyfood-nav" aria-expanded="false" aria-label="Toggle navigation"><i class="fa fa-bars"
                                aria-hidden="true"></i> Menu</button>
                        <!-- Menu Area Start -->
                        <div class="collapse navbar-collapse justify-content-center" id="yummyfood-nav">
                            <ul class="navbar-nav" id="yummy-nav">
                                <li class="nav-item">
                                    <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="contact.html">Contato</a>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ****** Header ****** -->

    <div class="text-center">            
        </div>
        <div id="page-cadastro">
            <p>
                Espaço para realizar o cadastro de novos alimentos.
            </p>
    
            <div class="form-cadastro">
                <form method="post">
                    <div>
                        <fieldset id="fildset-dadosPessoais">
                                <legend>Dados do alimento</legend>
                                <div>
                                    <input type="text" name="nomeAlimento" id="nome" placeholder="Nome do alimento">
                                </div>
                                <div>
                                    <input type="text" name="valorAlimento" id="nutricao" placeholder="Valor Nutricional">
                                </div>
                                <div>
                                    <select type="text" name="selecionarCategoria" id="categoriaSelect">
                                        <option value="">Selecione uma opção</option>
                                        <!-- CATEGORIAS AQUI -->
                                    </select>                                    
                                </div>
                                <div>
                                    <select type="text" name="selecionarLocal" id="localSelect">
                                        <option value="">Selecione uma opção</option>
                                        <!-- LOCAIS AQUI -->
                                    </select>                                    
                                </div>
                                <div>
                                    <select type="text" name="selecionarNutriente" id="nutrienteSelect">
                                        <option value="">Selecione uma opção</option>
                                        <!-- LOCAIS AQUI -->
                                    </select>                                    
                                </div>                               
                        </fieldset> 
                    </div>                       
                    <div>
                        <input type="submit" id="btnSubmit"></input>
                    </div>
                </form>
            </div>
        </div>

    <!-- ****** Footer Redes Sociais Area Start ****** -->
    <div class="social_icon_area clearfix">
        <div class="container">
            <div class="row">
                <div class="col-12">
                </div>
            </div>
        </div>
    </div>
    <!-- ****** Footer Redes Sociais Area End ****** -->

    <!-- ****** Footer Menu Area Start ****** -->
    <footer class="footer_area">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <!-- Copywrite Text -->
                    <div class="copy_right_text text-center">
                        <p>Copyright @2018 All rights reserved | This template is made with <i class="fa fa-heart-o"
                                aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a></p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- ****** Footer Menu Area End ****** -->

    <script src="js/jquery/jquery-2.2.4.min.js"></script>
    <script src="js/others/jquery.mask.js"></script>
    <script src="js/others/jquery.mask.min.js"></script>
    <script src="js/bootstrap/popper.min.js"></script>
    <script src="js/bootstrap/bootstrap.min.js"></script>
    <script src="js/others/plugins.js"></script>
    <script src="js/active.js"></script>

    <script>            
            $(document).ready(function(){
                $.ajax ({
                    url: "https://guiaalimentarapi2.azurewebsites.net/categorias",
                    method: "GET",           
                    success: function (data, textStatus, xhr) {
                        for (i=0; i < data.length; i++) {
                            $('#categoriaSelect option:last').after(`
                                <option value="${data[i].id}">${data[i].nome}</option>`); 
                        }
                    },
                });
            });

            $(document).ready(function(){
                $.ajax ({
                    url: "https://guiaalimentarapi2.azurewebsites.net/locais",
                    method: "GET",           
                    success: function (data, textStatus, xhr) {
                        for (i=0; i < data.length; i++) {
                            $('#localSelect option:last').after(`
                                <option value="${data[i].id}">${data[i].nome}</option>`); 
                        }
                    },
                });
            });

            $(document).ready(function(){
                $.ajax ({
                    url: "https://guiaalimentarapi2.azurewebsites.net/nutrientes",
                    method: "GET",           
                    success: function (data, textStatus, xhr) {
                        for (i=0; i < data.length; i++) {
                            $('#nutrienteSelect option:last').after(`
                                <option value="${data[i].id}">${data[i].nome}</option>`); 
                        }
                    },
                });
            });           

            $('form').submit (function (event) {      
                event.preventDefault();         
                nomeAlimento =
                    $('[name=nomeAlimento]').val();
                valorAlimento =
                    $('[name=valorAlimento]').val();
                idCategoria = 
                    $('[name=selecionarCategoria]').val();
                
                array1 = [$('[name=selecionarLocal]').val()];
                idLocal = JSON.stringify(array1);

                array2 = [$('[name=selecionarNutriente]').val()];
                idNutri = JSON.stringify(array2);
                
                //idLocal = 
                    //$('[name=selecionarLocal]').val();
                //idNutri = 
                    //$('[name=selecionarNutriente]').val();
                $.ajax({                    
                method: 
                    'POST',
                url:
                    "https://guiaalimentarapi2.azurewebsites.net/alimentos",
                data:
                    '{"idCategoria": "' + idCategoria + '", "nome": "' + nomeAlimento + '", "valorNutricional": "' + valorAlimento + '", "idLocais": "' + idLocal + '", "idNutrientes": "' + idNutri + '"}',
                contentType:
                    'application/json',
                dataType: 'json',
                success:
                    function (data,
                        textStatus,
                        xhr) {
                        alert('Alimento cadastrado com sucesso!');
                    },                
                });
            });                          
    </script>

</body>

</html>